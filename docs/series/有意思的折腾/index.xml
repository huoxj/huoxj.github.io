<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>有意思的折腾 on Runz&#39;s Blog</title>
    <link>https://huoxj.github.io/series/%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%8A%98%E8%85%BE/</link>
    <description>Recent content in 有意思的折腾 on Runz&#39;s Blog</description>
    <generator>Hugo</generator>
    <language>cn</language>
    <lastBuildDate>Fri, 28 Feb 2025 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://huoxj.github.io/series/%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%8A%98%E8%85%BE/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Nvim —— 我的第N代移动开发方案</title>
      <link>https://huoxj.github.io/posts/%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%8A%98%E8%85%BE/nvim--%E6%88%91%E7%9A%84%E7%AC%ACn%E4%BB%A3%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91%E6%96%B9%E6%A1%88/</link>
      <pubDate>Fri, 28 Feb 2025 00:00:00 +0000</pubDate>
      <guid>https://huoxj.github.io/posts/%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%8A%98%E8%85%BE/nvim--%E6%88%91%E7%9A%84%E7%AC%ACn%E4%BB%A3%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91%E6%96%B9%E6%A1%88/</guid>
      <description>&lt;ul&gt;&#xA;&lt;li&gt;iPad 原生软件——Code&lt;/li&gt;&#xA;&lt;li&gt;UTM 虚拟机&lt;/li&gt;&#xA;&lt;li&gt;串流&lt;/li&gt;&#xA;&lt;li&gt;ish&lt;/li&gt;&#xA;&lt;li&gt;ssh&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>小米路由器 4Av2 刷 Openwrt 并开启 NAT6</title>
      <link>https://huoxj.github.io/posts/%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%8A%98%E8%85%BE/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8-4av2-%E5%88%B7-openwrt-%E5%B9%B6%E5%BC%80%E5%90%AF-nat6/</link>
      <pubDate>Sun, 03 Nov 2024 00:00:00 +0000</pubDate>
      <guid>https://huoxj.github.io/posts/%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%8A%98%E8%85%BE/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8-4av2-%E5%88%B7-openwrt-%E5%B9%B6%E5%BC%80%E5%90%AF-nat6/</guid>
      <description>&lt;h2 id=&#34;需求&#34;&gt;需求&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;校园网 128 位前缀的 IPV6 地址做 NAT6&lt;/li&gt;&#xA;&lt;li&gt;IPV6 访问 PT 站&lt;/li&gt;&#xA;&lt;li&gt;其他功能，比如魔法&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;网络环境是&lt;code&gt;南京大学鼓楼校区校园网&lt;/code&gt;。仙林应该是差不多的。&lt;/p&gt;&#xA;&lt;p&gt;设备是&lt;code&gt;小米路由器 4A v2&lt;/code&gt;。这个设备导致我装 Openwrt 的过程相当坎坷 TAT，再也不贪便宜买低端设备了。&lt;/p&gt;&#xA;&lt;h2 id=&#34;刷-openwrt&#34;&gt;刷 Openwrt&lt;/h2&gt;&#xA;&lt;h3 id=&#34;breed&#34;&gt;Breed&lt;/h3&gt;&#xA;&lt;p&gt;Breed 是一种 bootloader，路由器会先引导至 Breed 后再引导你刷的其他系统。这样就不怕系统刷坏变砖了。&lt;/p&gt;&#xA;&lt;p&gt;刷 Breed 的教程很多，这里不再赘述。（刷一次基本一劳永逸了，所以不太记得怎么刷）&lt;/p&gt;&#xA;&lt;h3 id=&#34;自编译-openwrt&#34;&gt;自编译 Openwrt&lt;/h3&gt;&#xA;&lt;p&gt;你也可以选择在线编译 Openwrt 的方案，比如 Github Action 、&lt;a href=&#34;https://firmware-selector.openwrt.org/&#34;&gt;OpenWrt Firmware Selector&lt;/a&gt; 和 &lt;a href=&#34;https://openwrt.ai&#34;&gt;openwrt.ai&lt;/a&gt;。&lt;/p&gt;&#xA;&lt;p&gt;我之前直接使用了别人编译好的系统，但存在许许多多的问题导致 IPV6 配不起来，故尝试了自己编译，也还算有趣。抖m指数++。&lt;/p&gt;&#xA;&lt;p&gt;编译的环境最好选 Linux 或者 WSL。常用的包和依赖得备齐，并且最好全程有魔法，否则很难编译成功。&lt;/p&gt;&#xA;&lt;p&gt;首先拉取 openwrt 源码。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git clone https://github.com/openwrt/openwrt&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;拉取下来的 &lt;code&gt;main&lt;/code&gt; 分支是 snapshot 版本，建议还是选择稳定版，否则有些软件包装不了。写作本文时最新版为 23.05.5，对应 branch 为 &lt;code&gt;openwrt-23.05&lt;/code&gt;，下文以此为准。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git checkout openwrt-23.05&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果你想从其他版本构建，比如 LEDE 或者老版本 Openwrt，可以参考&lt;a href=&#34;https://www.bilibili.com/read/cv23234832/&#34;&gt;小米4A千兆版V2刷自己编译的OpenWRT以及IPV6设置（包括中继与NAT6） - 哔哩哔哩&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>使用VMware给物理硬盘装系统</title>
      <link>https://huoxj.github.io/posts/%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%8A%98%E8%85%BE/%E4%BD%BF%E7%94%A8vmware%E7%BB%99%E7%89%A9%E7%90%86%E7%A1%AC%E7%9B%98%E8%A3%85%E7%B3%BB%E7%BB%9F/</link>
      <pubDate>Fri, 27 Sep 2024 00:00:00 +0000</pubDate>
      <guid>https://huoxj.github.io/posts/%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%8A%98%E8%85%BE/%E4%BD%BF%E7%94%A8vmware%E7%BB%99%E7%89%A9%E7%90%86%E7%A1%AC%E7%9B%98%E8%A3%85%E7%B3%BB%E7%BB%9F/</guid>
      <description>&lt;h2 id=&#34;起因&#34;&gt;起因&lt;/h2&gt;&#xA;&lt;p&gt;由于手贱不小心删了Ubuntu自带的Python，服务器上的Ubuntu Server炸了。。。只能重新装一遍系统。但是我懒得做启动U盘了，所以索性直接在VMware里把系统给装起来。&lt;/p&gt;&#xA;&lt;h2 id=&#34;创建虚拟机并挂载物理磁盘&#34;&gt;创建虚拟机并挂载物理磁盘&lt;/h2&gt;&#xA;&lt;p&gt;只需要先下好你要装的系统的映象就行。然后把要装系统的硬盘装到你的电脑上。&#xA;还有很重要的一点，VMware一点要以&lt;strong&gt;管理员身份&lt;/strong&gt;启动！不然Windows不让加物理磁盘！&lt;/p&gt;&#xA;&lt;p&gt;首先随便创建一个虚拟机，配置选自定义。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://runzblog.oss-cn-hangzhou.aliyuncs.com/postimg/Pasted%20image%2020240913151634.png&#34; alt=&#34;Pasted image 20240913151634&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;在安装来源这里选稍后安装操作系统，或者直接选系统映象。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://runzblog.oss-cn-hangzhou.aliyuncs.com/postimg/Pasted%20image%2020240913151818.png&#34; alt=&#34;Pasted image 20240913151818&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;安装位置随便选一个地方就行，反正等会就给他删掉了。我直接放桌面。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://runzblog.oss-cn-hangzhou.aliyuncs.com/postimg/Pasted%20image%2020240913151919.png&#34; alt=&#34;Pasted image 20240913151919&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;内存、网络正常选就行。&#xA;I/O控制器选VMware推荐的&lt;code&gt;LSI Logic&lt;/code&gt;，其他的应该也没差。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://runzblog.oss-cn-hangzhou.aliyuncs.com/postimg/Pasted%20image%2020240913152323.png&#34; alt=&#34;Pasted image 20240913152323&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;虚拟磁盘类型选SATA或者NVMe，取决于你的物理磁盘是哪种类型的。我装在机械硬盘上，所以选SATA。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://runzblog.oss-cn-hangzhou.aliyuncs.com/postimg/Pasted%20image%2020240913155440.png&#34; alt=&#34;Pasted image 20240913155440&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;然后重要的来了，使用哪个磁盘这里选择使用物理磁盘。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://runzblog.oss-cn-hangzhou.aliyuncs.com/postimg/Pasted%20image%2020240913152548.png&#34; alt=&#34;Pasted image 20240913152548&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;这里如果没有用管理员身份启动VMware就会出问题：&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://runzblog.oss-cn-hangzhou.aliyuncs.com/postimg/Pasted%20image%2020240913152716.png&#34; alt=&#34;Pasted image 20240913152716&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;然后就是选哪个PhysicalDrive的问题。这个只需要右键&lt;code&gt;此电脑&lt;/code&gt;-&lt;code&gt;管理&lt;/code&gt;-&lt;code&gt;磁盘管理&lt;/code&gt;里面看就行。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://runzblog.oss-cn-hangzhou.aliyuncs.com/postimg/Pasted%20image%2020240913153011.png&#34; alt=&#34;Pasted image 20240913153011&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;可以看到磁盘0、磁盘1和磁盘2。这就对应着PhysicalDrive的编号。然后选择&lt;code&gt;使用整个磁盘&lt;/code&gt;。&#xA;磁盘分区信息放桌面那里就行了。&lt;/p&gt;&#xA;&lt;h2 id=&#34;安装ubuntu-server&#34;&gt;安装Ubuntu Server&lt;/h2&gt;&#xA;&lt;p&gt;创建好虚拟机之后，如果你之前创建虚拟机的时候没有选择映象的话，在虚拟机设置里面的&lt;code&gt;CD/DVD&lt;/code&gt;中把映象选上去。然后启动时连接记得打开，不然&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://runzblog.oss-cn-hangzhou.aliyuncs.com/postimg/Pasted%20image%2020240913155651.png&#34; alt=&#34;Pasted image 20240913155651&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;然后在硬盘一项中点击&lt;code&gt;高级&lt;/code&gt;，模式选择&lt;code&gt;独立&lt;/code&gt;-&lt;code&gt;永久&lt;/code&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://runzblog.oss-cn-hangzhou.aliyuncs.com/postimg/Pasted%20image%2020240913161135.png&#34; alt=&#34;Pasted image 20240913161135&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;然后就是正常的安装流程了。基本会一点英文就能顺利通过啦~&lt;/p&gt;</description>
    </item>
    <item>
      <title>Linux根目录扩容</title>
      <link>https://huoxj.github.io/posts/%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%8A%98%E8%85%BE/linux%E6%A0%B9%E7%9B%AE%E5%BD%95%E6%89%A9%E5%AE%B9/</link>
      <pubDate>Fri, 06 Sep 2024 00:00:00 +0000</pubDate>
      <guid>https://huoxj.github.io/posts/%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%8A%98%E8%85%BE/linux%E6%A0%B9%E7%9B%AE%E5%BD%95%E6%89%A9%E5%AE%B9/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/602888861&#34;&gt;linux新增磁盘或增加磁盘容量后，如何进行扩容 - 知乎 (zhihu.com)&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;有时间补一下我是怎么操作的。&lt;/p&gt;</description>
    </item>
    <item>
      <title>NPS折腾记录</title>
      <link>https://huoxj.github.io/posts/%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%8A%98%E8%85%BE/nps%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/</link>
      <pubDate>Sun, 01 Sep 2024 00:00:00 +0000</pubDate>
      <guid>https://huoxj.github.io/posts/%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%8A%98%E8%85%BE/nps%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/</guid>
      <description>&lt;h1 id=&#34;内网穿透折腾记录&#34;&gt;内网穿透折腾记录&lt;/h1&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;还是草稿，以后有时间写&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;在宿舍里搞了一台ubuntu server折腾用。想在校园网的特殊环境下实现外网访问内网的需求，从而能随时使用个人博客与code server等服务。&lt;/p&gt;&#xA;&lt;p&gt;以下为我在大二开学诞生这个需求，直到大三开学才基本实现的一整年的折腾过程的记录。由于计算机网络方面的知识十分浅薄（日常吐槽计网），文章中可能会出现十分多不专业的内容，欢迎各位大佬勘误与科普。同时也给正在折腾的朋友们一些十分不严谨的参考。&lt;/p&gt;&#xA;&lt;h2 id=&#34;first-try&#34;&gt;First try&lt;/h2&gt;&#xA;&lt;p&gt;使用第三方frp/ngrok方案。&lt;/p&gt;&#xA;&lt;p&gt;这个方案源自于和朋友联机minecraft的经历。Minecraft服务器架设在内网端口，但可以通过一些frp服务来暴露到一个域名上，从而通过这个域名就能访问到mc服务器。&lt;/p&gt;&#xA;&lt;p&gt;对于其他的内网服务，这个方案基本也是可行的。好了问题解决了，这篇文章可以结束了。&lt;/p&gt;&#xA;&lt;p&gt;并不能。这种方案太不优雅了。临时使用的话现成frp或ngrok很不错。&lt;/p&gt;&#xA;&lt;p&gt;但是，使用现成frp缺点很多无法忍受：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;极小的带宽。一般免费隧道带宽只有3M以内，付费也就10M封顶。如果是好几个人一起玩mc或者传个文件啥基本就爆了。&lt;/li&gt;&#xA;&lt;li&gt;限流量。之前用的好几个frp的流量都有每日签到领取，这个太难绷了。&lt;/li&gt;&#xA;&lt;li&gt;随机域名/定死的顶级域名。没法用自己的域名，这个接受程度因人而异。&lt;/li&gt;&#xA;&lt;li&gt;安全问题。数据都要走服务商那里转发，如果服务商被hack了就相当于裸奔了，不安全。&lt;/li&gt;&#xA;&lt;li&gt;隧道数限制、校园网拦截等等&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;frp用了一两天后我直接关隧道跑路了，还是寻求其他方案吧。&lt;/p&gt;&#xA;&lt;h2 id=&#34;second-try&#34;&gt;Second try:&lt;/h2&gt;&#xA;&lt;p&gt;这次的方案转向了一个更加普遍的方案，就是直接通过某种方法拿到本机的公网IP。&lt;/p&gt;&#xA;&lt;p&gt;这种方案对于家里宽带有公网IPv4的十分方便且自由。但现在运营商基本不给公网ip了，所以IPv4基本走不通。&lt;/p&gt;&#xA;&lt;p&gt;但是，号称每一粒沙子都能分到地址的IPv6似乎就宽松很多了。如果能拿到服务器的IPv6地址，再绑个ddns，似乎基本就能实现我们的需求。&lt;/p&gt;&#xA;&lt;p&gt;开干。但是经历了九九八十一难，最终还是没能成功。&lt;/p&gt;&#xA;&lt;p&gt;第一难是路由器。我的路由器型号是Redmi 4A，官方的固件虽说能拿到IPv6的IP，但是没法关闭防火墙放行IPv6的出站流量。所以我给路由器刷了一个openwrt。&lt;/p&gt;&#xA;&lt;p&gt;第二难是openwrt。由于之前没接触过刷机，所以在找刷机包和编译上花了很多时间。最后还是用了大佬做好的刷机包。还好这个过程有breed防砖，不然路由器已经死了一百遍了。&lt;/p&gt;&#xA;&lt;p&gt;第三难是校园网IPv6分配。openwrt中获取到IPv6地址了，但是校园网的v6地址是/128的，也就是说真的只分配了一个地址，没法组子网。这个地址直接分给路由器了，路由器下的内网设备如果要以IPv&lt;/p&gt;&#xA;&lt;p&gt;6向外提供服务，就只能通过NAT6。这个NAT6难搞得一比，主要原因是路由器存储空间太小了，没法安装直接配置NAT6的插件。&lt;/p&gt;&#xA;&lt;p&gt;最后在这一步放弃了，因为在一次测试中突然发现了校园网是个大内网，你的路由器能上行不代表校园网中层层墙能让你上行……&lt;/p&gt;&#xA;&lt;p&gt;还有一个大问题。IPv6的站点只能由支持IPv6的设备访问，而就目前IPv6的普及情况……估计半数以上的情况都访问不了。&lt;/p&gt;&#xA;&lt;h2 id=&#34;third-try&#34;&gt;Third try&lt;/h2&gt;&#xA;&lt;p&gt;第二次尝试失败后，由于学业繁忙，折腾的进程陷入停滞……&lt;/p&gt;&#xA;&lt;p&gt;转机在软工II课上，我为课程项目的后端购买了一个阿里云ECS。使用ecs一段时间后，我突然想到，能不能将ecs的公网IP，用在我的内网服务上呢？&lt;/p&gt;&#xA;&lt;p&gt;答案是肯定的。这种利用云服务器实现内网穿透的方案就是代理。&lt;/p&gt;&#xA;&lt;h2 id=&#34;出问题辣&#34;&gt;出问题辣&lt;/h2&gt;&#xA;&lt;p&gt;通过公网服务器端口访问内网服务时，如果内网服务是像wordpress这种比较复杂的网页，就会发生一系列错误的重定向。&lt;/p&gt;&#xA;&lt;p&gt;以我的wordpress博客举例，访问&lt;code&gt;websiteIP:port&lt;/code&gt;的链接后，wp会返回301重定向，这个重定向会转到一系列链接&lt;/p&gt;&#xA;&lt;h2 id=&#34;reference&#34;&gt;Reference&lt;/h2&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://developer.aliyun.com/article/878758&#34;&gt;如何用阿里云实现内网穿透？如何在外网访问家里内网设备？-阿里云开发者社区 (aliyun.com)&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://hub.docker.com/r/ffdfgdfg/nps&#34;&gt;ffdfgdfg/nps - Docker Image | Docker Hub&lt;/a&gt;&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
